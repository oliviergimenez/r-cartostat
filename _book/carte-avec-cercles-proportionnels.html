<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Carte avec cercles proportionnels | Cartographie avec R à l’usage des statisticiens</title>
  <meta name="description" content="6 Carte avec cercles proportionnels | Cartographie avec R à l’usage des statisticiens" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Carte avec cercles proportionnels | Cartographie avec R à l’usage des statisticiens" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="tvroylandt/r-cartostat" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Carte avec cercles proportionnels | Cartographie avec R à l’usage des statisticiens" />
  
  
  

<meta name="author" content="Thomas Vroylandt" />


<meta name="date" content="2020-01-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="aplats-de-couleurs.html"/>
<link rel="next" href="personnaliser-vos-cartes.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objectifs"><i class="fa fa-check"></i>Objectifs</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="préliminaires.html"><a href="préliminaires.html"><i class="fa fa-check"></i><b>1</b> Préliminaires</a><ul>
<li class="chapter" data-level="1.1" data-path="préliminaires.html"><a href="préliminaires.html#installer-r-et-rstudio"><i class="fa fa-check"></i><b>1.1</b> Installer R et Rstudio</a><ul>
<li class="chapter" data-level="1.1.1" data-path="préliminaires.html"><a href="préliminaires.html#r"><i class="fa fa-check"></i><b>1.1.1</b> R</a></li>
<li class="chapter" data-level="1.1.2" data-path="préliminaires.html"><a href="préliminaires.html#rstudio"><i class="fa fa-check"></i><b>1.1.2</b> Rstudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="préliminaires.html"><a href="préliminaires.html#fonctionner-en-projet"><i class="fa fa-check"></i><b>1.2</b> Fonctionner en projet</a><ul>
<li class="chapter" data-level="1.2.1" data-path="préliminaires.html"><a href="préliminaires.html#les-projets-dans-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Les projets dans RStudio</a></li>
<li class="chapter" data-level="1.2.2" data-path="préliminaires.html"><a href="préliminaires.html#désactiver-les-options-de-sauvegarde-automatique-de-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Désactiver les options de sauvegarde automatique de RStudio</a></li>
<li class="chapter" data-level="1.2.3" data-path="préliminaires.html"><a href="préliminaires.html#organiser-votre-travail"><i class="fa fa-check"></i><b>1.2.3</b> Organiser votre travail</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="préliminaires.html"><a href="préliminaires.html#utiliser-un-package"><i class="fa fa-check"></i><b>1.3</b> Utiliser un package</a><ul>
<li class="chapter" data-level="1.3.1" data-path="préliminaires.html"><a href="préliminaires.html#installer-les-packages"><i class="fa fa-check"></i><b>1.3.1</b> Installer les packages</a></li>
<li class="chapter" data-level="1.3.2" data-path="préliminaires.html"><a href="préliminaires.html#charger-les-packages"><i class="fa fa-check"></i><b>1.3.2</b> Charger les packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="préparer-vos-données.html"><a href="préparer-vos-données.html"><i class="fa fa-check"></i><b>2</b> Préparer vos données</a><ul>
<li class="chapter" data-level="2.1" data-path="préparer-vos-données.html"><a href="préparer-vos-données.html#importer-des-données"><i class="fa fa-check"></i><b>2.1</b> Importer des données</a><ul>
<li class="chapter" data-level="2.1.1" data-path="préparer-vos-données.html"><a href="préparer-vos-données.html#structure-dimport"><i class="fa fa-check"></i><b>2.1.1</b> Structure d’import</a></li>
<li class="chapter" data-level="2.1.2" data-path="préparer-vos-données.html"><a href="préparer-vos-données.html#exemples"><i class="fa fa-check"></i><b>2.1.2</b> Exemples</a></li>
<li class="chapter" data-level="2.1.3" data-path="préparer-vos-données.html"><a href="préparer-vos-données.html#afficher-la-table"><i class="fa fa-check"></i><b>2.1.3</b> Afficher la table</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="préparer-vos-données.html"><a href="préparer-vos-données.html#pour-la-cartographie"><i class="fa fa-check"></i><b>2.2</b> Pour la cartographie</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="données-spatiales.html"><a href="données-spatiales.html"><i class="fa fa-check"></i><b>3</b> Données spatiales</a><ul>
<li class="chapter" data-level="3.1" data-path="données-spatiales.html"><a href="données-spatiales.html#les-données-vectorielles"><i class="fa fa-check"></i><b>3.1</b> Les données vectorielles</a><ul>
<li class="chapter" data-level="3.1.1" data-path="données-spatiales.html"><a href="données-spatiales.html#quest-ce-quune-donnée-vectorielle"><i class="fa fa-check"></i><b>3.1.1</b> Qu’est-ce qu’une donnée vectorielle ?</a></li>
<li class="chapter" data-level="3.1.2" data-path="données-spatiales.html"><a href="données-spatiales.html#le-format-shapefile"><i class="fa fa-check"></i><b>3.1.2</b> Le format <em>shapefile</em></a></li>
<li class="chapter" data-level="3.1.3" data-path="données-spatiales.html"><a href="données-spatiales.html#a-pôle-emploi"><i class="fa fa-check"></i><b>3.1.3</b> A Pôle emploi</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="données-spatiales.html"><a href="données-spatiales.html#importer-des-données-spatiales"><i class="fa fa-check"></i><b>3.2</b> Importer des données spatiales</a></li>
<li class="chapter" data-level="3.3" data-path="données-spatiales.html"><a href="données-spatiales.html#opérations-sur-données-spatiales"><i class="fa fa-check"></i><b>3.3</b> Opérations sur données spatiales</a><ul>
<li class="chapter" data-level="3.3.1" data-path="données-spatiales.html"><a href="données-spatiales.html#filtre"><i class="fa fa-check"></i><b>3.3.1</b> Filtre</a></li>
<li class="chapter" data-level="3.3.2" data-path="données-spatiales.html"><a href="données-spatiales.html#modification-de-colonnes"><i class="fa fa-check"></i><b>3.3.2</b> Modification de colonnes</a></li>
<li class="chapter" data-level="3.3.3" data-path="données-spatiales.html"><a href="données-spatiales.html#regroupement"><i class="fa fa-check"></i><b>3.3.3</b> Regroupement</a></li>
<li class="chapter" data-level="3.3.4" data-path="données-spatiales.html"><a href="données-spatiales.html#enlever-la-colonne-geometry"><i class="fa fa-check"></i><b>3.3.4</b> Enlever la colonne <code>geometry</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="données-spatiales.html"><a href="données-spatiales.html#ajouter-de-linformation-statistique"><i class="fa fa-check"></i><b>3.4</b> Ajouter de l’information statistique</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="réaliser-les-cartes.html"><a href="réaliser-les-cartes.html"><i class="fa fa-check"></i><b>4</b> Réaliser les cartes</a><ul>
<li class="chapter" data-level="4.1" data-path="réaliser-les-cartes.html"><a href="réaliser-les-cartes.html#fonctionnement-de-ggplot2"><i class="fa fa-check"></i><b>4.1</b> Fonctionnement de <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.2" data-path="réaliser-les-cartes.html"><a href="réaliser-les-cartes.html#pour-la-cartographie-1"><i class="fa fa-check"></i><b>4.2</b> Pour la cartographie</a><ul>
<li class="chapter" data-level="4.2.1" data-path="réaliser-les-cartes.html"><a href="réaliser-les-cartes.html#spécifier-la-table-de-données"><i class="fa fa-check"></i><b>4.2.1</b> Spécifier la table de données</a></li>
<li class="chapter" data-level="4.2.2" data-path="réaliser-les-cartes.html"><a href="réaliser-les-cartes.html#afficher-plusieurs-couches-de-données"><i class="fa fa-check"></i><b>4.2.2</b> Afficher plusieurs couches de données</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="aplats-de-couleurs.html"><a href="aplats-de-couleurs.html"><i class="fa fa-check"></i><b>5</b> Aplats de couleurs</a><ul>
<li class="chapter" data-level="5.1" data-path="aplats-de-couleurs.html"><a href="aplats-de-couleurs.html#spécifier-la-variable-à-représenter"><i class="fa fa-check"></i><b>5.1</b> Spécifier la variable à représenter</a><ul>
<li class="chapter" data-level="5.1.1" data-path="aplats-de-couleurs.html"><a href="aplats-de-couleurs.html#continue"><i class="fa fa-check"></i><b>5.1.1</b> Continue</a></li>
<li class="chapter" data-level="5.1.2" data-path="aplats-de-couleurs.html"><a href="aplats-de-couleurs.html#discrète"><i class="fa fa-check"></i><b>5.1.2</b> Discrète</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="aplats-de-couleurs.html"><a href="aplats-de-couleurs.html#afficher-les-valeurs"><i class="fa fa-check"></i><b>5.2</b> Afficher les valeurs</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="carte-avec-cercles-proportionnels.html"><a href="carte-avec-cercles-proportionnels.html"><i class="fa fa-check"></i><b>6</b> Carte avec cercles proportionnels</a><ul>
<li class="chapter" data-level="6.1" data-path="carte-avec-cercles-proportionnels.html"><a href="carte-avec-cercles-proportionnels.html#ajouter-les-valeurs"><i class="fa fa-check"></i><b>6.1</b> Ajouter les valeurs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="personnaliser-vos-cartes.html"><a href="personnaliser-vos-cartes.html"><i class="fa fa-check"></i><b>7</b> Personnaliser vos cartes</a><ul>
<li class="chapter" data-level="7.1" data-path="personnaliser-vos-cartes.html"><a href="personnaliser-vos-cartes.html#ajouter-des-labels"><i class="fa fa-check"></i><b>7.1</b> Ajouter des labels</a></li>
<li class="chapter" data-level="7.2" data-path="personnaliser-vos-cartes.html"><a href="personnaliser-vos-cartes.html#scale"><i class="fa fa-check"></i><b>7.2</b> Scale</a></li>
<li class="chapter" data-level="7.3" data-path="personnaliser-vos-cartes.html"><a href="personnaliser-vos-cartes.html#theme"><i class="fa fa-check"></i><b>7.3</b> Theme</a></li>
<li class="chapter" data-level="7.4" data-path="personnaliser-vos-cartes.html"><a href="personnaliser-vos-cartes.html#carte-choroplèthe"><i class="fa fa-check"></i><b>7.4</b> Carte choroplèthe</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exporter-vos-résultats.html"><a href="exporter-vos-résultats.html"><i class="fa fa-check"></i><b>8</b> Exporter vos résultats</a></li>
<li class="chapter" data-level="9" data-path="format-de-fichiers.html"><a href="format-de-fichiers.html"><i class="fa fa-check"></i><b>9</b> Format de fichiers</a><ul>
<li class="chapter" data-level="9.0.1" data-path="format-de-fichiers.html"><a href="format-de-fichiers.html#modifier-des-colonnes"><i class="fa fa-check"></i><b>9.0.1</b> Modifier des colonnes</a></li>
<li class="chapter" data-level="9.0.2" data-path="format-de-fichiers.html"><a href="format-de-fichiers.html#filtrer-des-lignes"><i class="fa fa-check"></i><b>9.0.2</b> Filtrer des lignes</a></li>
<li class="chapter" data-level="9.0.3" data-path="format-de-fichiers.html"><a href="format-de-fichiers.html#regrouper-et-sommer-les-données"><i class="fa fa-check"></i><b>9.0.3</b> Regrouper et sommer les données</a></li>
<li class="chapter" data-level="9.0.4" data-path="format-de-fichiers.html"><a href="format-de-fichiers.html#joindre-des-tables"><i class="fa fa-check"></i><b>9.0.4</b> Joindre des tables</a></li>
<li class="chapter" data-level="9.0.5" data-path="format-de-fichiers.html"><a href="format-de-fichiers.html#discrétiser-des-valeurs"><i class="fa fa-check"></i><b>9.0.5</b> Discrétiser des valeurs</a></li>
<li class="chapter" data-level="9.0.6" data-path="format-de-fichiers.html"><a href="format-de-fichiers.html#recoder-des-facteurs"><i class="fa fa-check"></i><b>9.0.6</b> Recoder des facteurs</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cartographie avec R à l’usage des statisticiens</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="carte-avec-cercles-proportionnels" class="section level1">
<h1><span class="header-section-number">6</span> Carte avec cercles proportionnels</h1>
<p>Un autre type de carte représente chaque valeur par un cercle proportionnel et éventuellement une couleur.</p>
<p>Pour la réaliser, on va construire un jeu de données localisé au niveau du centroïde (barycentre) de chaque zone. On repart de la table jointée.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"> <span class="op">+</span></a>
<a class="sourceLine" id="cb37-2" title="2"><span class="st">  </span><span class="kw">stat_sf_coordinates</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> part_diff_classes, <span class="dt">size =</span> part_diff),</a>
<a class="sourceLine" id="cb37-3" title="3">                      <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb37-4" title="4">                      <span class="dt">shape =</span> <span class="dv">21</span>)</a>
<a class="sourceLine" id="cb37-5" title="5"></a>
<a class="sourceLine" id="cb37-6" title="6">bmo_<span class="dv">2019</span>_dep_shp_centre &lt;-<span class="st"> </span>bmo_<span class="dv">2019</span>_dep_shp <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-7" title="7"><span class="st">  </span><span class="kw">st_centroid</span>() <span class="co"># cette fonctionne transforme un polygone en son centroid (un point)</span></a></code></pre></div>
<p>On va ensuite afficher la carte et au dessus les points, en tant que deuxième couche, en lui précisant qu’on souhaite que la taille soit proportionnelle au nombre de projets et la couleur à la difficulté.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> bmo_<span class="dv">2019</span>_dep_shp) <span class="op">+</span><span class="st"> </span><span class="co"># on affiche une première fois les zones</span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> bmo_<span class="dv">2019</span>_dep_shp_centre, <span class="kw">aes</span>(<span class="dt">size =</span> nb_proj_tot, <span class="dt">color =</span> part_diff)) <span class="co"># puis les points, en précisant leur taille et couleur</span></a></code></pre></div>
<p>De la même façon que précédemment, on va régler les caractéristiques avec des échelles. En variant la forme (<em>shape</em>), on peut afficher des carrés, des triangles, etc.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb39-2" title="2"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> bmo_<span class="dv">2019</span>_dep_shp) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> bmo_<span class="dv">2019</span>_dep_shp_centre, <span class="kw">aes</span>(<span class="dt">size =</span> nb_proj_tot, </a>
<a class="sourceLine" id="cb39-4" title="4">                                              <span class="dt">fill =</span> part_diff), </a>
<a class="sourceLine" id="cb39-5" title="5">          <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="co"># on en précise la forme (un rond à remplir avec fill)</span></a>
<a class="sourceLine" id="cb39-6" title="6"><span class="st">  </span><span class="kw">scale_fill_gradient</span>(<span class="dt">name =</span> <span class="st">&quot;&quot;</span>, <span class="dt">low =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">high =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-7" title="7"><span class="st">  </span><span class="kw">scale_size_continuous</span>(<span class="dt">range =</span> <span class="kw">c</span>(<span class="fl">0.5</span>, <span class="dv">12</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-8" title="8"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Nombre de projets et </span><span class="ch">\n</span><span class="st">part des recrutements difficiles en 2019 </span><span class="ch">\n</span><span class="st">par département&quot;</span>,</a>
<a class="sourceLine" id="cb39-9" title="9">       <span class="dt">caption =</span> <span class="st">&quot;Source : Pôle emploi, enquête Besoins en main d&#39;oeuvre </span><span class="ch">\n</span><span class="st">Les cercles sont proportionnels au nombre de projets. La couleur indique la difficulté&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-10" title="10"><span class="st">  </span><span class="kw">guides</span>(<span class="dt">size =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span><span class="co"># guides sert à dire de masquer la légende de taille</span></a>
<a class="sourceLine" id="cb39-11" title="11"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb39-12" title="12"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.caption =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="dv">0</span>))</a></code></pre></div>
<div id="ajouter-les-valeurs" class="section level2">
<h2><span class="header-section-number">6.1</span> Ajouter les valeurs</h2>
<p>Pour afficher les valeurs sur la carte, on repart des centroïdes. On en extrait les coordonnées pour avoir pour chaque point, localisé par un X et un Y, une valeur à afficher.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">bmo_<span class="dv">2019</span>_dep_shp_centre_label &lt;-<span class="st"> </span>bmo_<span class="dv">2019</span>_dep_shp_centre <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="st">  </span><span class="kw">st_coordinates</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># on récupère les coordonnées des centroids</span></a>
<a class="sourceLine" id="cb40-3" title="3"><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-4" title="4"><span class="st">  </span><span class="kw">bind_cols</span>(<span class="dt">part_diff =</span> bmo_<span class="dv">2019</span>_dep_shp_centre<span class="op">$</span>part_diff) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># on ajoute la colonne à afficher</span></a>
<a class="sourceLine" id="cb40-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">part_diff =</span> <span class="kw">paste0</span>(<span class="kw">round</span>(part_diff, <span class="dv">0</span>), <span class="st">&quot;%&quot;</span>)) <span class="co"># on l&#39;arrondi à 0 en ajoutant un % derrière</span></a>
<a class="sourceLine" id="cb40-6" title="6"></a>
<a class="sourceLine" id="cb40-7" title="7">bmo_<span class="dv">2019</span>_dep_shp_centre_label</a></code></pre></div>
<p>Doc geom point : <a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_point.html</a></p>
<p>Shape : <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html" class="uri">https://ggplot2.tidyverse.org/articles/ggplot2-specs.html</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="aplats-de-couleurs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="personnaliser-vos-cartes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
